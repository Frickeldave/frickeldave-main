---
interface Props {
  videoId: string;
  title: string;
}

const { videoId, title } = Astro.props;
---

<div class="privacy-youtube relative w-full my-6" style="padding-bottom: 56.25%;" data-video-id={videoId}>
  <img 
    src={`https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`}
    alt="Video Vorschaubild" 
    class="absolute inset-0 w-full h-full object-cover rounded-lg"
  />
  <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg">
    <button class="play-button bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg transition-colors">
      ▶️ Video laden ({title})
    </button>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.privacy-youtube').forEach(container => {
    const button = container.querySelector('.play-button');
    const videoId = (container as HTMLElement).dataset.videoId;
    
    button?.addEventListener('click', function() {
      container.innerHTML = `
        <iframe 
          class="absolute top-0 left-0 w-full h-full rounded-lg"
          src="https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1" 
          title="Video"
          frameborder="0" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
          allowfullscreen
        ></iframe>
      `;
    });
  });
});
</script>